---
  - name: Initial_Setup
    hosts: all
    roles:
      - init

  - name: DNS_Servers
    hosts: dns_servers
    roles:
      - bind
      
  - name: Resolver
    hosts: all
    roles:
      - resolver

  - name: Prometheus
    hosts: prometheus
    roles:
      - prometheus
      - nginx

  - name: Grafana
    hosts: grafana
    roles:
      - grafana
      
  - name: Database Server
    hosts: db_servers
    roles: 
      - mysql
    tags:
      - mx

  - name: InfluxDB
    hosts: influxdb
    roles:
      - influxdb
  
  - name: agama server
    hosts: agama
    roles:
      - agama

  - name: Web server
    hosts: web_servers
    roles:
      - uwsgi
      - nginx
    tags:
      - mx

  - name: agama client
    hosts: agama
    roles:
      - agama_client
